---
import type { Ingredient } from "@/lib/data";

const {
  ingredient,
  densityRange,
  hasVariants = false,
  isVariant = false,
  chartSlug,
  guideSlug,
} = Astro.props as {
  ingredient: Ingredient;
  densityRange: string;
  hasVariants?: boolean;
  isVariant?: boolean;
  chartSlug?: string;
  guideSlug?: string;
};

const categoryLabel = ingredient.category.replace(/-/g, " ");
---

<article
  class="card card-pad h-full flex flex-col"
  data-ingredient-card
  data-name={ingredient.name.toLowerCase()}
  data-category={ingredient.category}
  data-variant={isVariant ? "true" : "false"}
  data-has-variants={hasVariants ? "true" : "false"}
>
  <div class="flex items-start justify-between gap-3">
    <h2 class="text-base font-semibold text-slate-900">{ingredient.name}</h2>
    <span class="badge text-xs capitalize">{categoryLabel}</span>
  </div>
  <p class="mt-2 text-sm text-slate-600">Density range: {densityRange}</p>
  <div class="mt-2 flex flex-wrap gap-2">
    {hasVariants && <span class="badge">Has variants</span>}
    {isVariant && <span class="badge">Variant</span>}
  </div>

  <div class="mt-4 flex flex-wrap gap-2">
    <a class="btn-primary no-underline" href={`/cooking/${ingredient.slug}/`}>Conversions</a>
    <a class="btn-ghost no-underline" href={`/ingredients/${ingredient.slug}/`}>View density</a>
  </div>

  <div class="mt-3 flex flex-wrap gap-3 text-sm">
    {chartSlug && <a class="text-primary-600 hover:underline" href={`/charts/${chartSlug}/`}>Chart</a>}
    {guideSlug && <a class="text-primary-600 hover:underline" href={`/guides/${guideSlug}/`}>Guide</a>}
  </div>
</article>
