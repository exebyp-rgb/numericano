---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import ingredients from "../../../data/data/ingredients.json";
import type { Ingredient } from "../../../types";
import { buildTitle, buildDescription } from "../../../lib/seo";

const { ingredient: slug } = Astro.params;

const ING = ingredients.find((i) => i.slug === slug) as Ingredient;

if (!ING) {
  return Astro.redirect("/cooking");
}

const units = ["tsp", "tbsp", "cup", "g", "oz"];
const conversions = [];

for (let i = 0; i < units.length; i++) {
  for (let j = i + 1; j < units.length; j++) {
    conversions.push({
      from: units[i],
      to: units[j],
      url: `/cooking/${slug}/${units[i]}-to-${units[j]}/`,
    });
    conversions.push({
      from: units[j],
      to: units[i],
      url: `/cooking/${slug}/${units[j]}-to-${units[i]}/`,
    });
  }
}

const title = buildTitle([`${ING.name} conversions`]);
const description = buildDescription(`Convert ${ING.name} between different units: cups, tablespoons, teaspoons, grams and ounces using typical density & variants.`);
---

<BaseLayout title={title} description={description}>
  <h1 class="text-3xl font-semibold tracking-tight">{ING.name} · conversions</h1>
  <p class="mt-2 text-slate-700 max-w-2xl">
    Convert {ING.name} between different measurement units. Select the units you want to
    convert from and to.
  </p>

  <ul class="mt-6 grid gap-2 sm:grid-cols-2">
    {conversions.map((c) => (
      <li>
        <a
          class="block rounded-lg border px-4 py-3 hover:bg-slate-50"
          href={c.url}
        >
          <div class="font-medium">
            {c.from} → {c.to}
          </div>
          <div class="text-xs text-slate-600">
            Convert {ING.name} from {c.from} to {c.to}
          </div>
        </a>
      </li>
    ))}
  </ul>
</BaseLayout>
