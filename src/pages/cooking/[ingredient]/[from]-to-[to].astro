---
// Импорты — каждая запись на своей строке
import ingredients from "../../../data/data/ingredients.json";
import pairs from "../../../data/data/cookingPairs.json";
import { volumeToMass, fat } from "../../../lib/convert";

// Типы — обязательно на отдельных строках
type IngredientVariant = {
  name: string;
  density: number;
};

type Ingredient = {
  slug: string;
  name: string;
  notes?: string;
  variants: IngredientVariant[];
};

// Привязка данных
const ING = ingredients as Ingredient[];

// Минимальный getStaticPaths для проверки сборки
export async function getStaticPaths() {
  return [
    { params: { ingredient: "sugar", from: "cup", to: "g" } }
  ];
}

// Доступ к параметрам маршрута
const { ingredient, from, to } = Astro.params;

// Небольшая логика рендера (без сложных вычислений)
const ing = ING.find(i => i.slug === ingredient) ?? ING[0];
const title = ing ? `${ing.name}: ${from} → ${to}` : `${ingredient} conversion`;
---

<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>{title}</title>
  </head>
  <body>
    <h1>{title}</h1>
    <p>Короткий ответ и проверка работы маршрута для <strong>{ingredient}</strong>.</p>
  </body>
</html>
