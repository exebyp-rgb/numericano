---
import BaseLayout from "../layouts/BaseLayout.astro";
import { buildTitle, buildDescription } from "../lib/seo";
import { guideSlugs, chartSlugs } from "@/lib/site-data";

const title = buildTitle(["Unit conversions", "volume â†” weight", "ingredient densities"]);
const description = buildDescription(
  "Numericano helps you convert cooking volumes to weights using clear density assumptions. Explore ingredient pages or run conversions directly."
);

const toTitle = (slug: string) =>
  slug
    .split("-")
    .map((part) => part.charAt(0).toUpperCase() + part.slice(1))
    .join(" ");

const popularGuides = guideSlugs.slice(0, 6).map((slug) => ({
  slug,
  title: toTitle(slug),
}));

const popularCharts = chartSlugs.slice(0, 6).map((slug) => ({
  slug,
  title: toTitle(slug.replace(/-conversion-chart$/, "")) + " chart",
}));
---
<BaseLayout title={title} description={description}>
  <section class="card card-pad mb-8">
    <p class="text-sm uppercase tracking-wider text-slate-500">Numericano</p>
    <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Cooking conversions made simple</h1>
    <p class="mt-3 text-lg text-slate-700 max-w-2xl">
      Convert cups, tablespoons, teaspoons, and milliliters to grams and ounces using reliable density assumptions.
      Browse ingredients, guides, and printable charts.
    </p>
    <div class="mt-4 flex flex-wrap gap-2">
      <a class="btn-primary no-underline" href="/ingredients/browse/">Browse ingredients</a>
      <a class="btn-ghost no-underline" href="/cooking/">Explore conversions</a>
    </div>
  </section>

  <section class="mb-10">
    <div class="flex items-center justify-between gap-3">
      <h2 class="text-2xl font-bold text-slate-900">Popular Guides</h2>
      <a class="btn-ghost no-underline" href="/guides/">View all guides</a>
    </div>
    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3 mt-4">
      {popularGuides.map((guide) => (
        <article class="card hover:shadow-md transition">
          <div class="card-pad">
            <h3 class="text-lg font-semibold text-slate-900">
              <a href={`/guides/${guide.slug}/`}>{guide.title}</a>
            </h3>
            <p class="text-sm text-slate-600 mt-2">Practical tips for accurate measuring and conversions.</p>
            <div class="mt-3">
              <a class="btn" href={`/guides/${guide.slug}/`}>Read guide</a>
            </div>
          </div>
        </article>
      ))}
    </div>
  </section>

  <section>
    <div class="flex items-center justify-between gap-3">
      <h2 class="text-2xl font-bold text-slate-900">Popular Charts</h2>
      <a class="btn-ghost no-underline" href="/charts/">View all charts</a>
    </div>
    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3 mt-4">
      {popularCharts.map((chart) => (
        <article class="card hover:shadow-md transition">
          <div class="card-pad">
            <h3 class="text-lg font-semibold text-slate-900">
              <a href={`/charts/${chart.slug}/`}>{chart.title}</a>
            </h3>
            <p class="text-sm text-slate-600 mt-2">Printable conversion chart for quick lookups.</p>
            <div class="mt-3">
              <a class="btn" href={`/charts/${chart.slug}/`}>Open chart</a>
            </div>
          </div>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
